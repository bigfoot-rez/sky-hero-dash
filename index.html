<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="theme-color" content="#0b1020" />
  <title>Skybop Dash</title>
  <link rel="stylesheet" href="style.css?v=26" />
</head>
<body>
  <div id="splash" class="splash">
    <div class="splashCard">
      <div class="splashTitle">Skybop Dash</div>
      <div class="splashSub">Loading…</div>
      <div class="splashBar"><div id="splashFill" class="splashFill"></div></div>
      <div id="versionText" class="splashVersion">v18</div>
    </div>
  </div>

  <div class="topHud">
    <div class="hudLeft">
      <div class="hudRow">
        <span class="label">Player:</span> <span id="playerName">Player</span>
        <button id="changeNameButton" class="btn tiny">Pause → tap 3× to change name</button>
      </div>

      <div class="hudRow">
        <span class="label">Score:</span> <span id="scoreText">0</span>
        <span class="sep">|</span>
        <span class="label">Best:</span> <span id="bestText">0</span>
        <span class="sep">|</span>
        <span class="label">Coins:</span> <span id="coinsText">0</span>
      </div>
    </div>

    <div class="hudRight">
      <button id="pauseButton" class="btn">Pause</button>
      <button id="resetButton" class="btn secondary">Reset</button>
    </div>
  </div>

  <div class="stage">
    <canvas id="gameCanvas" width="360" height="640"></canvas>
  </div>

  <div id="toast" class="toast hidden">Toast</div>

  <!-- Home Menu -->
  <div id="menu" class="menu">
    <div class="card">
      <div class="title">Skybop Dash</div>
      <div class="subtitle">Mobile-ready web game</div>

      <div class="menuButtons">
        <button id="playButton" class="btn big">Play</button>
        <button id="settingsButton" class="btn big secondary">Settings</button>
        <button id="shopButton" class="btn big secondary">Shop</button>
      </div>

      <div class="miniInfo">
        <div class="miniBox">
          <div class="miniLabel">Local Top 5</div>
          <ol id="localLeaderboard" class="leaderboard"></ol>
        </div>
      </div>
    </div>
  </div>

  <!-- Settings Panel -->
  <div id="settingsPanel" class="panel hidden">
    <div class="panelCard">
      <div class="panelHeader">
        <div class="panelTitle">Settings</div>
        <button id="closeSettings" class="btn tiny">Close</button>
      </div>

      <div class="panelBody">
        <div class="row">
          <label class="switch">
            <input id="soundToggle" type="checkbox" />
            <span class="switchText">Sound</span>
          </label>

          <label class="switch">
            <input id="musicToggle" type="checkbox" />
            <span class="switchText">Music</span>
          </label>
        </div>

        <div class="group">
          <div class="groupTitle">Background</div>
          <div class="row">
            <select id="bgSelect" class="select"></select>
          </div>
          <canvas id="previewCanvas" width="320" height="140" class="preview"></canvas>
        </div>

        <div class="group">
          <div class="groupTitle">Music</div>
          <div class="row">
            <select id="musicSelect" class="select"></select>
          </div>
          <div class="row">
            <button id="musicPlayPreview" class="btn small">Play Preview</button>
            <button id="musicStopPreview" class="btn small secondary">Stop</button>
          </div>
        </div>

        <div class="group">
          <div class="groupTitle">SFX Pack</div>
          <div class="row">
            <select id="sfxSelect" class="select">
              <option value="classic">Classic</option>
              <option value="heroic">Heroic</option>
              <option value="robot">Robot</option>
            </select>
          </div>
          <div class="row">
            <button id="sfxTestFlap" class="btn small">Boost</button>
            <button id="sfxTestScore" class="btn small">Score</button>
            <button id="sfxTestPower" class="btn small">Power</button>
            <button id="sfxTestCrash" class="btn small secondary">Crash</button>
          </div>
        </div>

        <div class="group">
          <div class="groupTitle">Character</div>

          <div class="row">
            <div class="col">
              <div class="labelSmall">Body</div>
              <select id="bodySelect" class="select"></select>
            </div>
            <div class="col">
              <div class="labelSmall">Head</div>
              <select id="headSelect" class="select"></select>
            </div>
          </div>

          <div class="row">
            <div class="col">
              <div class="labelSmall">Suit</div>
              <input id="suitColor" type="color" class="color" />
            </div>
            <div class="col">
              <div class="labelSmall">Cape</div>
              <input id="capeColor" type="color" class="color" />
            </div>
            <div class="col">
              <div class="labelSmall">Mask</div>
              <input id="maskColor" type="color" class="color" />
            </div>
          </div>

          <canvas id="heroPreviewCanvas" width="320" height="140" class="preview"></canvas>
        </div>

        <div class="group">
          <div class="groupTitle">Cosmetics</div>
          <div class="row">
            <div class="col">
              <div class="labelSmall">Trail</div>
              <select id="trailSelect" class="select">
                <option value="none">None</option>
                <option value="spark">Spark</option>
                <option value="neon">Neon</option>
                <option value="smoke">Smoke</option>
                <option value="confetti">Confetti</option>
                <option value="embers">Embers</option>
                <option value="bubbles">Bubbles</option>
                <option value="stars">Star Dust</option>
                <option value="glitch">Glitch</option>
              </select>
            </div>
            <div class="col">
              <div class="labelSmall">Aura</div>
              <select id="auraSelect" class="select">
                <option value="none">None</option>
                <option value="halo">Halo</option>
                <option value="shadow">Shadow</option>
                <option value="pulse">Pulse</option>
                <option value="frost">Frost</option>
              </select>
            </div>
            <div class="col">
              <div class="labelSmall">Buildings</div>
              <select id="buildStyleSelect" class="select">
                <option value="brick">Brick</option>
                <option value="glass">Glass</option>
                <option value="neon">Neon</option>
                <option value="stone">Stone</option>
              </select>
            </div>
          </div>
        </div>

        <div class="hint">
          Dash: quick <b>double tap</b> (needs Dash charge). Single tap = boost.
        </div>
      </div>
    </div>
  </div>

  <!-- Shop -->
  <div id="shopPanel" class="panel hidden">
    <div class="panelCard">
      <div class="panelHeader">
        <div class="panelTitle">Shop</div>
        <button id="closeShop" class="btn tiny">Close</button>
      </div>
      <div class="panelBody">
        <div class="hint">Earn coins by scoring + picking up power-ups.</div>
        <div id="shopList" class="shopList"></div>
      </div>
    </div>
  </div>

  <!-- Pause / Game Over Overlay -->
  <div id="overlay" class="overlay hidden">
    <div class="overlayCard">
      <div id="overlayTitle" class="overlayTitle">Paused</div>
      <div id="overlaySubtitle" class="overlaySubtitle">Resume or go home.</div>

      <div class="overlayButtons">
        <button id="overlayResume" class="btn big">Resume</button>
        <button id="overlaySettings" class="btn big secondary">Settings</button>
        <button id="overlayHome" class="btn big secondary">Home</button>
      </div>
    </div>
  </div>

  <script src="game.js?v=26"></script>
  <script>
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", () => {
        navigator.serviceWorker.register("./sw.js").catch(() => {});
      });
    }
  </script>
</body>
</html>
